syntax = "proto3";

package api.v1;

import "google/api/annotations.proto";
import "google/api/field_behavior.proto";
import "google/protobuf/timestamp.proto";
import "protoc-gen-openapiv2/options/annotations.proto";
import "validate/validate.proto";

option go_package = "gitlab.playpod.ir/alpha/backend/server-services-next/gen/go/api/v1;apiv1";

// RateValue is a message.
message RateValue {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"average_value":4.5,"count":10,"game_id":"00000000-0000-0000-0000-000000000001"}',
    external_docs: {
      description: "Find out more about RateValue",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A rate",
      required: [],
      title: "RateValue Message",
    },
    read_only: true,
  };
  // Output only. average_value is a property.
  float average_value = 1 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The average_value field."}
  ];
  // Output only. count is a property.
  uint32 count = 2 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The count field."}
  ];
  // Output only. game_id is a property.
  string game_id = 3 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The game_id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
}

// Rate is a message.
message Rate {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"value":4,"id":"00000000-0000-0000-0000-000000000001","game_id":"00000000-0000-0000-0000-000000000001","user_id":"00000000-0000-0000-0000-000000000001"}',
    external_docs: {
      description: "Find out more about Rate",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A rate message",
      required: [],
      title: "Rate Message",
    },
    read_only: true,
  };
  // Output only. value is a property.
  uint32 value = 1 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The value field."}
  ];
  // Output only. id is a property.
  string id = 2 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
  // Output only. user_id is a property.
  string user_id = 3 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The user_id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
  // Output only. game_id is a property.
  string game_id = 4 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The game_id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
}

// RateServiceCreateRequest is a message.
message RateServiceCreateRequest {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"game_id":"00000000-0000-0000-0000-000000000001","user_id":"00000000-0000-0000-0000-000000000001","value":4}',
    external_docs: {
      description: "Find out more about RateServiceCreateRequest",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A rate service create request",
      required: [
        "game_id",
        "user_id",
        "value"
      ],
      title: "RateServiceCreateRequest Message",
    },
    read_only: false,
  };
  // Required. game_id is a property.
  string game_id = 1 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The game_id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
  // Required. user_id is a property.
  string user_id = 3 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The user_id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
  // Required. value is a property.
  uint32 value = 4 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The value field."},
    (validate.rules) = {
      uint32: {
        gt: 0,
        lt: 6
      }
    }
  ];
}

// RateServiceCreateResponse is a message.
message RateServiceCreateResponse {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"id":"00000000-0000-0000-0000-000000000015"}',
    external_docs: {
      description: "Find out more about RateServiceCreateResponse";
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A rate service create response",
      title: "RateServiceCreateResponse Message",
    },
    read_only: true,
  };
  // Required. id is a property.
  string id = 1 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
}

// RateServiceDeleteRequest is a message.
message RateServiceDeleteRequest {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"id":"00000000-0000-0000-0000-000000000001"}',
    external_docs: {
      description: "Find out more about RateServiceDeleteRequest",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A rate service delete request",
      required: ["id"],
      title: "RateServiceDeleteRequest Message",
    },
    read_only: false,
  };
  // Required. id is a property.
  string id = 1 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
}

// RateServiceDeleteResponse is a message.
message RateServiceDeleteResponse {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"deleted_at":"2022-12-04T13:37:00.888824135Z"}',
    external_docs: {
      description: "Find out more about RateServiceDeleteResponse";
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A rate service delete response",
      title: "RateServiceDeleteResponse Message",
    },
    read_only: true,
  };
  // deleted_at is a property.
  google.protobuf.Timestamp deleted_at = 1 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The deleted_at field."}
  ];
}

// RateServiceGetByGameIDRequest is a message.
message RateServiceGetByGameIDRequest {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"game_id":"00000000-0000-0000-0000-000000000001"}',
    external_docs: {
      description: "Find out more about RateServiceGetByGameIDRequest",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A rate service get by game id request",
      required: ["game_id"],
      title: "RateServiceGetByGameIDRequest Message",
    },
    read_only: false,
  };
  // Required. game_id is a property.
  string game_id = 1 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The game_id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
}

// RateServiceGetByGameIDResponse is a message.
message RateServiceGetByGameIDResponse {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"rate":{"average_value":4,"count":10,"game_id":"00000000-0000-0000-0000-000000000001"}}',
    external_docs: {
      description: "Find out more about RateServiceGetByGameIDResponse";
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A rate service get by game id response",
      title: "RateServiceGetByGameIDResponse Message",
    },
    read_only: true,
  };
  // Output only. rate_value is a property.
  RateValue rate_value = 1 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The rate_value field."}
  ];
}

// RateServiceListRequest is a message
message RateServiceListRequest {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"page_token":"Cv-BBgEC_4QAAAAG_4IAAjEK","page_size":10,"game_id":"00000000-0000-0000-0000-000000000001","user_id":"00000000-0000-0000-0000-000000000001"}',
    external_docs: {
      description: "Find out more about RateServiceListRequest";
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A rate service get list request",
      required: ["page_size"],
      title: "RateServiceListRequest Message",
    },
    read_only: true,
  };
  // page_token is a property.
  string page_token = 1 [
    (google.api.field_behavior) = OPTIONAL,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The page_token field."},
    (validate.rules) = {
      string: {ignore_empty: true}
    }
  ];
  // Required. page_size is a property.
  uint32 page_size = 2 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The page_size field."},
    (validate.rules) = {
      uint32: {
        gt: 0,
        lt: 100
      }
    }
  ];
  // game_id is a property.
  string game_id = 3 [
    (google.api.field_behavior) = OPTIONAL,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The game_id field."},
    (validate.rules) = {
      string: {
        ignore_empty: true
        uuid: true,
      }
    }
  ];
  // user_id is a property.
  string user_id = 4 [
    (google.api.field_behavior) = OPTIONAL,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The user_id field."},
    (validate.rules) = {
      string: {
        ignore_empty: true
        uuid: true,
      }
    }
  ];
}

// RateServiceListResponse is a message
message RateServiceListResponse {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"next_page_token":"Cv-BBgEC_4QAAAAH_4IAAzExCg==","rates":[{"value":4,"id":"00000000-0000-0000-0000-000000000001","game_id":"00000000-0000-0000-0000-000000000001","user_id":"00000000-0000-0000-0000-000000000001"}]}'
    external_docs: {
      description: "Find out more about RateServiceListResponse",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A rate service get list response",
      title: "RateServiceListResponse Message",
    },
    read_only: true,
  };
  // next_page_token is a property.
  string next_page_token = 1 [
    (google.api.field_behavior) = OPTIONAL,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The next_page_token field."},
    (validate.rules) = {
      string: {ignore_empty: true}
    }
  ];
  // rates is a property.
  repeated Rate rates = 2 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The rates field."}
  ];
}

// RateService is a service.
service RateService {
  // Create is a rpc.
  rpc Create(RateServiceCreateRequest) returns (RateServiceCreateResponse) {
    option (google.api.http) = {
      body: "*",
      post: "/api/v1/rates",
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      security: {
        security_requirement: {},
      },
    };
  }
  // Delete is a rpc.
  rpc Delete(RateServiceDeleteRequest) returns (RateServiceDeleteResponse) {
    option (google.api.http) = {delete: "/api/v1/rates/{id}"};
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      security: {
        security_requirement: {},
      },
    };
  }
  // GetByGameID is a rpc.
  rpc GetByGameID(RateServiceGetByGameIDRequest) returns (RateServiceGetByGameIDResponse) {
    option (google.api.http) = {get: "/api/v1/rates/gameId/{game_id}"};
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      security: {
        security_requirement: {},
      },
    };
  }
  // List is a rpc.
  rpc List(RateServiceListRequest) returns (RateServiceListResponse) {
    option (google.api.http) = {get: "/api/v1/rates"};
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      security: {
        security_requirement: {},
      },
    };
  }
}
