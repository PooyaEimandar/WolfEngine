syntax = "proto3";

package api.v1;

import "api/v1/stream.proto";
import "api/v1/tag.proto";
import "google/api/annotations.proto";
import "google/api/field_behavior.proto";
import "google/protobuf/timestamp.proto";
import "protoc-gen-openapiv2/options/annotations.proto";
import "validate/validate.proto";

option go_package = "gitlab.playpod.ir/alpha/backend/server-services-next/gen/go/api/v1;apiv1";

// StreamTag is a message.
message StreamTag {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"priority":0,"redirect_url":"redirect_url1","stream":{"gif_url":"gif_url1","id":"00000000-0000-0000-0000-000000000001","match_id":"00000000-0000-0000-0000-000000000001","title":"title1"},"tag":{"alt_url":"alt_url1","parent_id":"00000000-0000-0000-0000-000000000001"}}',
    external_docs: {
      description: "Find out more about StreamTag",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A streamTag",
      required: [],
      title: "StreamTag Message",
    },
    read_only: true,
  };
  // Required. priority is a property.
  uint32 priority = 1 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The priority field."},
    (validate.rules) = {
      uint32: {gt: 0}
    }
  ];
  // Required. redirect_url is a property.
  string redirect_url = 2 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The redirect_url field."}
  ];
  // stream is a property.
  Stream stream = 3 [
    (google.api.field_behavior) = OPTIONAL,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The stream field."}
  ];
  // tag is a property.
  Tag tag = 4 [
    (google.api.field_behavior) = OPTIONAL,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The tag field."}
  ];
}

// StreamTagServiceCreateRequest is a message.
message StreamTagServiceCreateRequest {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"priority":1,"redirect_url":"redirect_url1","stream_id":"00000000-0000-0000-0000-000000000001","tag_id":"00000000-0000-0000-0000-000000000001"}',
    external_docs: {
      description: "Find out more about StreamTagServiceCreateRequest",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A stream tag service create request",
      required: [
        "priority",
        "redirect_url",
        "stream_id",
        "tag_id"
      ],
      title: "StreamTagServiceCreateRequest Message",
    },
    read_only: false,
  };
  // Required. priority is a property.
  uint32 priority = 1 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The priority field."},
    (validate.rules) = {
      uint32: {gt: 0}
    }
  ];
  // Required. redirect_url is a property.
  string redirect_url = 2 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The redirect_url field."}
  ];
  // Required. stream_id is a property.
  string stream_id = 3 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The stream_id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
  // Required. tag_id is a property.
  string tag_id = 4 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The tag_id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
}

// StreamTagServiceCreateResponse is a message.
message StreamTagServiceCreateResponse {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    external_docs: {
      description: "Find out more about StreamTagServiceCreateResponse",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A stream tag service create response",
      title: "StreamTagServiceCreateResponse Message",
    },
    read_only: true,
  };
}

// StreamTagServiceDeleteRequest is a message.
message StreamTagServiceDeleteRequest {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"stream_id":"00000000-0000-0000-0000-000000000001","tag_id":"00000000-0000-0000-0000-000000000001"}',
    external_docs: {
      description: "Find out more about StreamTagServiceDeleteRequest",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A stream tag service delete request",
      required: [
        "stream_id",
        "tag_id"
      ],
      title: "StreamTagServiceDeleteRequest Message",
    },
    read_only: false,
  };
  // Required. stream_id is a property.
  string stream_id = 1 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The stream_id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
  // Required. tag_id is a property.
  string tag_id = 2 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The tag_id field."},
    (validate.rules) = {
      string: {uuid: true}
    }
  ];
}

// StreamTagServiceDeleteResponse is a message.
message StreamTagServiceDeleteResponse {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"deleted_at":"2022-12-04T13:37:00.888824135Z"}',
    external_docs: {
      description: "Find out more about StreamTagServiceDeleteResponse",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A stream tag service delete response",
      title: "StreamTagServiceDeleteResponse Message",
    },
    read_only: true,
  };
  // deleted_at is a property.
  google.protobuf.Timestamp deleted_at = 1 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The deleted_at field."}
  ];
}

// StreamTagServiceListRequest is a message.
message StreamTagServiceListRequest {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"page_token":"Cv-BBgEC_4QAAAAG_4IAAjEK","page_size":10,"stream_id":"00000000-0000-0000-0000-000000000001","tag_id":"00000000-0000-0000-0000-000000000001"}',
    external_docs: {
      description: "Find out more about StreamTagServiceListRequest",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A streamTag service get list request",
      required: ["page_size"],
      title: "StreamTagServiceListRequest Message",
    },
    read_only: false,
  };
  // page_token is a property.
  string page_token = 1 [
    (google.api.field_behavior) = OPTIONAL,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The page_token field."},
    (validate.rules) = {
      string: {ignore_empty: true}
    }
  ];
  // Required. page_size is a property.
  uint32 page_size = 2 [
    (google.api.field_behavior) = REQUIRED,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The page_size field."},
    (validate.rules) = {
      uint32: {
        gt: 0,
        lt: 100
      }
    }
  ];
  // stream_id is a property.
  string stream_id = 3 [
    (google.api.field_behavior) = OPTIONAL,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The stream_id field."},
    (validate.rules) = {
      string: {
        ignore_empty: true,
        uuid: true
      }
    }
  ];
  // tag_id is a property.
  string tag_id = 4 [
    (google.api.field_behavior) = OPTIONAL,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The tag_id field."},
    (validate.rules) = {
      string: {
        ignore_empty: true,
        uuid: true
      }
    }
  ];
}

// StreamTagServiceListResponse is a message.
message StreamTagServiceListResponse {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: '{"next_page_token":"Cv-BBgEC_4QAAAAH_4IAAzExCg==","stream_tags":{"priority":0,"redirect_url":"redirect_url1","stream":{"gif_url":"gif_url1","id":"00000000-0000-0000-0000-000000000001","match_id":"00000000-0000-0000-0000-000000000001","title":"title1"},"tag":{"alt_url":"alt_url1","parent_id":"00000000-0000-0000-0000-000000000001"}}}',
    external_docs: {
      description: "Find out more about StreamTagServiceListResponse",
      url: "https://gitlab.playpod.ir/alpha/backend/server-services-next",
    },
    json_schema: {
      description: "A streamTag service get list response",
      title: "StreamTagServiceListResponse Message",
    },
    read_only: true,
  };
  // next_page_token is a property.
  string next_page_token = 1 [
    (google.api.field_behavior) = OPTIONAL,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The next_page_token field."},
    (validate.rules) = {
      string: {ignore_empty: true}
    }
  ];
  // stream_tags is a property.
  repeated StreamTag stream_tags = 2 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "The stream_tags field."}
  ];
}

// StreamTagService is a service.
service StreamTagService {
  // Create is a rpc.
  rpc Create(StreamTagServiceCreateRequest) returns (StreamTagServiceCreateResponse) {
    option (google.api.http) = {
      body: "*",
      post: "/api/v1/streamTags",
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      security: {
        security_requirement: {},
      },
    };
  }
  // Delete is a rpc.
  rpc Delete(StreamTagServiceDeleteRequest) returns (StreamTagServiceDeleteResponse) {
    option (google.api.http) = {delete: "/api/v1/streamTags/{stream_id}/{tag_id}"};
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      security: {
        security_requirement: {},
      },
    };
  }
  // List is a rpc.
  rpc List(StreamTagServiceListRequest) returns (StreamTagServiceListResponse) {
    option (google.api.http) = {get: "/api/v1/streamTags"};
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      security: {
        security_requirement: {},
      },
    };
  }
}
